
<html>
<head>

<title>カレルリーダー</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="../../plugins/jquery.min.js"></script>
<link href="../../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<link href="../../style.css" rel="stylesheet"/> 
<script src="../..//karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="../../java/ja/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> カレル</a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter1.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter1.html">1  - カレルに会う</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter2.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter2.html">2  - プログラミング</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter3.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter3.html">3  - 新しい方法</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter4.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter4.html">4  - 分解</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter5.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter5.html">5  - ループ用</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter6.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter6.html">6  - ループ中</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter7.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter7.html">7  - 条件付き</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter8.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter8.html">8  - 洗練</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/chapter9.html'">
<a class="bookLink btn btn-link" href="../../java/ja/chapter9.html">9  - スーパーカレル</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/reference.html'">
<a class="bookLink btn btn-link" href="../../java/ja/reference.html">10  - 参照</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/ja/ide.html'">
<a class="bookLink btn btn-link" href="../../java/ja/ide.html">11  - コード</a> 
</div>
<hr/>
 <a href="../../"><img src="../../images/unFlag.png" style="width:40px"/> もっと詳しく知る</a> 
<!-- <center>
    <img style ="width:75px;" src="../../images/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>第3章：新しいメソッドを定義する</h1>
<hr/>
<p>最後の章で、Karelが簡単な棚を登るのを手助けするプログラムを書きました。</p>
<h3>例：最初のカレル</h3>





<div class="section embeddedIde" id="beeperPickingRedux">
<div class="ide getStarted" id="beeperPickingReduxIde" style="height:387.20000000000005px">
<div class="ideCenter" id="beeperPickingReduxIdeCenter">
<div class="ideEditorDiv" id="beeperPickingReduxEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="beeperPickingReduxCanvasDiv">
<canvas class="ideCanvas" id="beeperPickingReduxCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="beeperPickingReduxRunButton"><span class="glyphicon glyphicon-play"></span>プログラムを実行</button>
</div>
</div>
<script>

        

function examplebeeperPickingRedux() {
STARTER_CODE = `

/*
 * ファイル：最初のカレル.java
 * ---------------
 * カレルはbeeperをピックアップしてbeeperに置きます。
 */
import stanford.カレル.*;
public class 最初のカレル extends カレル {
   public void run() {
      move();
      pickBeeper();
      move();
      turnLeft();
      move();
      turnLeft();
      turnLeft();
      turnLeft();
      move();
      move();
      putBeeper();
      move();
   } 
}
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importEditorCode('beeperPickingReduxEditor','beeperPickingReduxEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('beeperPickingReduxCanvas');
    karelIde = KarelIde('java',karelEditor, canvas, 'stepUp', 0.8, 'ja');
    $('#beeperPickingReduxRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#beeperPickingReduxRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#beeperPickingReduxRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 387.20000000000005;
    var canvasWidth = 300
    var parentWidth = $("#beeperPickingRedux").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('beeperPickingReduxIde');
    var editorDiv = document.getElementById('beeperPickingReduxEditorDiv');
    var canvas = document.getElementById('beeperPickingReduxCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplebeeperPickingRedux();
    </script>
</div>

<p>にもかかわらず <code>最初のカレル</code> 上記のプログラムは、実行することが可能であることを示しています <code>turnRight</code> Karelの組み込みコマンドのみを使用して操作した場合、結果として得られるプログラムは概念的には特に明確ではありません。プログラムのあなたの精神的なデザインでは、カレルはそれが棚の頂上に達すると右に曲がります。 3つのturnLeftコマンドを使用しなければならないという事実は厄介です。あなたが単純に言うことができればそれははるかに簡単になります <code>turnRight()</code> そしてカレルにこの命令を理解させなさい。結果として得られるプログラムは、短くて書くのが簡単になるだけでなく、読むのもかなり簡単になります。</p>
<h3>新しいコマンドの定義</h3>
<p>幸いなことに、Karelプログラミング言語は新しいメソッド定義を含めることによって新しいコマンドを定義することを可能にします。右に曲がるなど、便利なタスクを実行する一連のKarelコマンドがあるときはいつでも、その一連のコマンドを実行する新しいメソッドを定義できます。新しいKarelメソッドを定義するためのフォーマットは、の定義とほとんど同じです。 <code>run</code> 上記の例では、それ自体がメソッド定義です。一般的なメソッド定義は次のようになります。</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> </code> <i class="demoText">名</i> <code>() {</code> <br/>
<i class="demoText" style="margin-left:3.5em">メソッドの本体を構成するコマンド</i><br/>
 <code>   }</code> <br/>
</p>
<p>このパターンでは、nameは新しいメソッドに選択した名前を表します。定義を完成させるために、あなたがしなければならないのは中括弧の間の行にコマンドのシーケンスを提供することだけです。たとえば、次のように定義できます。 <code>turnRight</code> 次のように：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> turnRight() {</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code>   }</code> <br/>
</p>
<p>同様に、新しいものを定義できます。 <code>turnAround</code> このような方法：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> turnAround() {</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code>   }</code> <br/>
</p>
<p>Karelの組み込みコマンドのように新しいメソッドの名前を使うことができます。たとえば、一度定義したら <code>turnRight</code> では、3つのturnLeftコマンドを <code>ステップアップカレル</code> 1回の呼び出しでプログラム <code>turnRight</code> 方法。これを使用するプログラムの修正された実装はここにあります <code>turnRight</code> ：</p>





<div class="section embeddedIde" id="stepUp2">
<div class="ide getStarted" id="stepUp2Ide" style="height:545.6px">
<div class="ideCenter" id="stepUp2IdeCenter">
<div class="ideEditorDiv" id="stepUp2EditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="stepUp2CanvasDiv">
<canvas class="ideCanvas" id="stepUp2Canvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="stepUp2RunButton"><span class="glyphicon glyphicon-play"></span>プログラムを実行</button>
</div>
</div>
<script>

        

function examplestepUp2() {
STARTER_CODE = `

/*
 * File：Beeperピッキングカレル.java
 * -----------------------
 * Beeper runカレルプログラムは、3つのコマ
 * ンドで " run "メソッドを定義します。これら
 * のコマンドにより、カレルは1ブロックをmove転送し、 beeper 、次にmoveを次のコーナーにmoveします。
 */
import stanford.カレル.*;
public class Beeperピッキングカレル extends カレル {
   public void run() {
      move();
      pickBeeper();
      move();
      turnLeft();
      move();
      turnRight();
      move();
      move();
      putBeeper();
      move();
   }

   /**
    * カレルを右に90度回転させます。
    */
   private void turnRight() {
      turnLeft();
      turnLeft();
      turnLeft();
   }
}
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importEditorCode('stepUp2Editor','stepUp2EditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('stepUp2Canvas');
    karelIde = KarelIde('java',karelEditor, canvas, 'stepUp', 0.0, 'ja');
    $('#stepUp2RunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUp2RunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUp2RunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 545.6;
    var canvasWidth = 300
    var parentWidth = $("#stepUp2").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUp2Ide');
    var editorDiv = document.getElementById('stepUp2EditorDiv');
    var canvas = document.getElementById('stepUp2CanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplestepUp2();
    </script>
</div>

<p>もちろん、の定義には明らかな違いが1つあります。 <code>run</code> そして <code>turnRight</code> 上記のプログラムのメソッド： <code>run</code> メソッドはとしてマークされています <code>public</code> とは対照的に <code>turnRight</code> としてマークされている <code>private</code> 。これら2つの指定の違いは、パブリックメソッドはプログラムの外部から呼び出せるのに対し、プライベートメソッドは呼び出せないことです。 runメソッドはrunする必要があります。これは、Karel環境が、問題を解決するためにrunコマンドを発行できる必要があるためです。可能な限り定義を非公開にしておくのが一般的に良いプログラミング方法です。</p>
<h3>メソッドコードブロック</h3>
<p>2つの中括弧の間のコマンドのグループ <code translate="no">{ }</code> と呼ばれる <b>コードブロック</b> 。プログラム本体は、メソッド本体と同じコードブロックです。コードブロックの内容がすべて1タブ内でインデントされていることに注意してください。これは、特定のブロック内にコードのどの行があるかを人間が簡単に認識できるため、スタイル上重要です。</p>
<p>必要なだけメソッドを定義できます。それらはすべてあなたのプログラムコードブロックの中に次々に書かれるべきです。他のメソッドの中にメソッドを定義することはできません。</p>
<hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter4.html" role="button">次の章</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
