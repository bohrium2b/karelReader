
<html>
<head>

<title>卡雷尔读者</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="../../plugins/jquery.min.js"></script>
<link href="../../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<link href="../../style.css" rel="stylesheet"/> 
<script src="../..//karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="../../java/zh/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> 卡雷尔</a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter1.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter1.html">1  - 遇见卡雷尔</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter2.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter2.html">2  - 编程</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter3.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter3.html">3  - 新方法</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter4.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter4.html">4  - 分解</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter5.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter5.html">5  - 对于循环</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter6.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter6.html">6  - 循环时</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter7.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter7.html">7  - 条件</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter8.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter8.html">8  - 细化</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/chapter9.html'">
<a class="bookLink btn btn-link" href="../../java/zh/chapter9.html">9  - 超级卡雷尔</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/reference.html'">
<a class="bookLink btn btn-link" href="../../java/zh/reference.html">10  - 参考</a> 
</div>
<div class="chapterTab" onclick="location.href='../../java/zh/ide.html'">
<a class="bookLink btn btn-link" href="../../java/zh/ide.html">11  - 代码</a> 
</div>
<hr/>
 <a href="../../"><img src="../../images/unFlag.png" style="width:40px"/> 学到更多</a> 
<!-- <center>
    <img style ="width:75px;" src="../../images/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>第3章：定义新方法</h1>
<hr/>
<p>在上一章中，我们编写了一个程序来帮助Karel爬上一个简单的壁架：</p>
<h3>示例：第一个卡雷尔</h3>





<div class="section embeddedIde" id="beeperPickingRedux">
<div class="ide getStarted" id="beeperPickingReduxIde" style="height:387.20000000000005px">
<div class="ideCenter" id="beeperPickingReduxIdeCenter">
<div class="ideEditorDiv" id="beeperPickingReduxEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="beeperPickingReduxCanvasDiv">
<canvas class="ideCanvas" id="beeperPickingReduxCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="beeperPickingReduxRunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplebeeperPickingRedux() {
STARTER_CODE = `

/*
 * 文件：第一个卡雷尔.java
 * -------------
 * 卡雷尔拿起锥体并把它放在壁架上。
 */
import stanford.卡雷尔.*;
public class 第一个卡雷尔 extends 卡雷尔 {
   public void run() {
      move();
      pickBeeper();
      move();
      turnLeft();
      move();
      turnLeft();
      turnLeft();
      turnLeft();
      move();
      move();
      putBeeper();
      move();
   } 
}
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importEditorCode('beeperPickingReduxEditor','beeperPickingReduxEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('beeperPickingReduxCanvas');
    karelIde = KarelIde('java',karelEditor, canvas, 'stepUp', 0.8, 'zh');
    $('#beeperPickingReduxRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#beeperPickingReduxRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#beeperPickingReduxRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 387.20000000000005;
    var canvasWidth = 300
    var parentWidth = $("#beeperPickingRedux").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('beeperPickingReduxIde');
    var editorDiv = document.getElementById('beeperPickingReduxEditorDiv');
    var canvas = document.getElementById('beeperPickingReduxCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplebeeperPickingRedux();
    </script>
</div>

<p>即便如此 <code>第一个卡雷尔</code> 上面的程序表明可以执行 <code>turnRight</code> 仅使用Karel的内置命令进行操作，结果程序在概念上并不是特别清晰。在你的程序的心理设计中，卡雷尔在到达壁架顶部时向右转。您必须使用三个转左命令才能这样做的事实令人讨厌。如果你能简单地说，那会简单得多 <code>turnRight()</code> 让卡雷尔明白这个命令。生成的程序不仅更短，更容易编写，而且更容易阅读。</p>
<h3>定义新命令</h3>
<p>幸运的是，Karel编程语言可以简单地通过包含新的方法定义来定义新命令。每当你有一系列执行某些有用任务的Karel命令时 - 例如向右转 - 你可以定义一个执行该命令序列的新方法。定义新Karel方法的格式与定义的格式大致相同 <code>run</code> 在前面的例子中，这本身就是一个方法定义。典型的方法定义如下所示：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> </code> <i class="demoText">名称</i> <code>() {</code> <br/>
<i class="demoText" style="margin-left:3.5em">组成方法主体的命令</i><br/>
 <code>   }</code> <br/>
</p>
<p>在此模式中，name表示您为新方法选择的名称。要完成定义，您所要做的就是在花括号之间的行中提供命令序列。例如，您可以定义 <code>turnRight</code> 如下：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> turnRight() {</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code>   }</code> <br/>
</p>
<p>同样，您可以定义一个新的 <code>turnAround</code> 像这样的方法：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">private void</span> turnAround() {</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code style="margin-left:3.5em">turnLeft();</code> <br/>
 <code>   }</code> <br/>
</p>
<p>您可以像使用Karel的任何内置命令一样使用新方法的名称。例如，一旦定义了 <code>turnRight</code> ，你可以替换中的三个转左命令 <code>加强卡雷尔</code> 程序只需一次调用即可 <code>turnRight</code> 方法。这是使用的程序的修订实现 <code>turnRight</code> ：</p>





<div class="section embeddedIde" id="stepUp2">
<div class="ide getStarted" id="stepUp2Ide" style="height:545.6px">
<div class="ideCenter" id="stepUp2IdeCenter">
<div class="ideEditorDiv" id="stepUp2EditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="stepUp2CanvasDiv">
<canvas class="ideCanvas" id="stepUp2Canvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="stepUp2RunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplestepUp2() {
STARTER_CODE = `

/*
 * 文件：锥体采精锥体.java
 * -------------
 * 锥体采注锥体程序定义了一个带有三个命令的“ run
 * ”方法。这些命令导致卡雷尔向move前进一个
 * 区块，获得锥体 ，然后move前进到下一个角落。
 */
import stanford.卡雷尔.*;
public class 锥体采摘锥体 extends 卡雷尔 {
   public void run() {
      move();
      pickBeeper();
      move();
      turnLeft();
      move();
      turnRight();
      move();
      move();
      putBeeper();
      move();
   }

   /**
    * 卡雷尔向右转90度。
    */
   private void turnRight() {
      turnLeft();
      turnLeft();
      turnLeft();
   }
}
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importEditorCode('stepUp2Editor','stepUp2EditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('stepUp2Canvas');
    karelIde = KarelIde('java',karelEditor, canvas, 'stepUp', 0.0, 'zh');
    $('#stepUp2RunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUp2RunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUp2RunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 545.6;
    var canvasWidth = 300
    var parentWidth = $("#stepUp2").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUp2Ide');
    var editorDiv = document.getElementById('stepUp2EditorDiv');
    var canvas = document.getElementById('stepUp2CanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplestepUp2();
    </script>
</div>

<p>当然，在定义之间存在一个明显的区别 <code>run</code> 和 <code>turnRight</code> 上述程序中的方法： <code>run</code> 方法标记为 <code>public</code> 相比之下 <code>turnRight</code> ，标记为 <code>private</code> 。这两个名称之间的区别在于公共方法可以从程序外部调用，而私有方法则不能。 run方法需要公开，因为Karel环境需要能够发出run命令才能完成任务。通常，良好的编程习惯是尽可能保持定义私有。</p>
<h3>方法代码块</h3>
<p>两个大括号之间的一组命令 <code translate="no">{ }</code> 被称为 <b>代码块</b> 。程序的主体是一个代码块，也是方法的主体。请注意代码块的内容是如何缩进一个选项卡的。这在风格上很重要，因为它使人们很容易知道给定块中的代码行。</p>
<p>您可以根据需要定义任意数量的方法。它们都应该在程序代码块中一个接一个地写入。您无法在另一个方法中定义方法。</p>
<hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter4.html" role="button">下一章</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
